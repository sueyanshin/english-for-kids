<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Alphabets</title>
    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <!-- Fontawesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- CSS -->
    <link rel="stylesheet" href="../css/common.css" />
    <link rel="stylesheet" href="../css/quiz.css" />
    <link rel="stylesheet" href="../css/animals.css" />

    <style>
      .sec-abc img {
        cursor: pointer;
      }
    </style>

    <script src="../js/speech.js"></script>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar bg-body-tertiary shadow-sm">
      <div class="container">
        <a class="navbar-brand" href="../index.html">
          <img
            src="/images/common/logo-lingo.svg"
            alt="Logo"
            class="d-inline-block align-text-top"
          />
        </a>

        <div class="form-check form-switch form-check-reverse">
          <input
            class="form-check-input"
            type="checkbox"
            role="switch"
            id="flexSwitchCheckDefault"
            onchange="updateModelLabel(this)"
          />
          <label
            class="form-check-label"
            for="flexSwitchCheckDefault"
            id="modeLabel"
            >Learning Mode üë®‚Äçüè´</label
          >
        </div>
      </div>
    </nav>

    <!-- Section ABC -->
    <div class="sec-abc container pt-5" id="sec-abc">
      <div class="row">
        <div class="col-md-2" onclick="pronounce('c')">
          <img src="/images/c.png" alt="" />
        </div>
        <div class="col-md-2" onclick="pronounce('asr')">
          <img src="/images/c.png" alt="" />
        </div>
        <div class="col-md-2" onclick="pronounce('c')">
          <img src="/images/c.png" alt="" />
        </div>
        <div class="col-md-2" onclick="pronounce('c')">
          <img src="/images/c.png" alt="" />
        </div>
        <div class="col-md-2" onclick="pronounce('c')">
          <img src="/images/c.png" alt="" />
        </div>
        <div class="col-md-2" onclick="pronounce('c')">
          <img src="/images/c.png" alt="" />
        </div>
      </div>
    </div>

    <!-- Section Quiz -->

    <div class="container-fluid text-center p-5">
      <div class="row">
        <div class="col-md-6 mx-auto my-auto align-items-center">
          <div class="start-screen">
            <button
              class="btn btn-warning d-none"
              id="start-button"
              onclick="startQuiz()"
            >
              Start
            </button>
          </div>
          <div id="display-container" class="card p-3 d-none">
            <div
              class="header d-flex justify-content-between align-items-center border-bottom p-2"
            >
              <div class="number-of-count">
                <span class="number-of-question">1 of 3 questions</span>
              </div>
              <div class="timer-div">
                <!-- <img src="./images/common/timer.webp" width="20" alt="Timer" /> -->
                <i class="fa-regular fa-clock"></i>
                <span class="time-left">10s</span>
              </div>
            </div>
            <div id="container">
              <!-- questions and options will be displayed here -->
            </div>
            <button
              id="next-button"
              class="btn btn-warning col-md-6 mx-auto my-3"
            >
              Next
            </button>
          </div>
          <div class="score-container d-none" id="score-container">
            <div id="user-score">Demo Score</div>
            <button id="restart" class="btn btn-warning">Restart</button>
          </div>
        </div>
      </div>
    </div>

    <script>
      //References
      let timeLeft = document.querySelector(".time-left");
      let quizContainer = document.getElementById("container");
      let nextBtn = document.getElementById("next-button");
      let countOfQuestion = document.querySelector(".number-of-question");
      let restart = document.getElementById("restart");
      let userScore = document.getElementById("user-score");
      let startScreen = document.querySelector(".start-screen");
      let questionCount;
      let scoreCount = 0;
      let count = 11;
      let countdown;
      let label = document.getElementById("modeLabel");
      let secAbc = document.getElementById("sec-abc");
      let startButton = document.getElementById("start-button");
      let displayContainer = document.getElementById("display-container");
      let scoreContainer = document.getElementById("score-container");

      function updateModelLabel(checkbox) {
        if (checkbox.checked) {
          label.textContent = "Quiz Mode üìù";
          secAbc.classList.add("d-none");
          pronounce(
            "This is quiz mode.Now, you have to answer some of the questions."
          );
          startButton.classList.remove("d-none");
        } else {
          label.textContent = "Learning Mode üë®‚Äçüè´";
          secAbc.classList.remove("d-none");
          startButton.classList.add("d-none");
          displayContainer.classList.add("d-none");
          scoreContainer.classList.add("d-none");
        }
      }

      //Questions and Options array

      const quizArray = [
        {
          id: "0",
          question: "Which is the most widely spoken language in the world?",
          options: ["Spanish", "Mandarin", "English", "German"],
          correct: "Mandarin",
        },
        {
          id: "1",
          question:
            "Which is the only continent in the world without a desert?",
          options: ["North America", "Asia", "Africa", "Europe"],
          correct: "Europe",
        },
        {
          id: "2",
          question: "Who invented Computer?",
          options: [
            "Charles Babbage",
            "Henry Luce",
            "Henry Babbage",
            "Charles Luce",
          ],
          correct: "Charles Babbage",
        },
        {
          id: "3",
          question:
            "What do you call a computer on a network that requests files from another computer?",
          options: ["A client", "A host", "A router", "A web server"],
          correct: "A client",
        },
        {
          id: "4",
          question:
            "Hardware devices that are not part of the main computer system and are often added later to the system.",
          options: ["Peripheral", "Clip art", "Highlight", "Execute"],
          correct: "Peripheral",
        },
        {
          id: "5",
          question:
            "The main computer that stores the files that can be sent to computers that are networked together is:",
          options: ["Clip art", "Mother board", "Peripheral", "File server"],
          correct: "File server",
        },
        {
          id: "6",
          question: "How can you catch a computer virus?",
          options: [
            "Sending e-mail messages",
            "Using a laptop during the winter",
            "Opening e-mail attachments",
            "Shopping on-line",
          ],
          correct: "Opening e-mail attachments",
        },
        {
          id: "7",
          question: "Google (www.google.com) is a:",
          options: [
            "Search Engine",
            "Number in Math",
            "Directory of images",
            "Chat service on the web",
          ],
          correct: "Search Engine",
        },
        {
          id: "8",
          question: "Which is not an Internet protocol?",
          options: ["HTTP", "FTP", "STP", "IP"],
          correct: "STP",
        },
        {
          id: "9",
          question: "Which of the following is not a valid domain name?",
          options: [
            "www.yahoo.com",
            "www.yahoo.co.uk",
            "www.com.yahoo",
            "www.yahoo.co.in",
          ],
          correct: "www.com.yahoo",
        },
      ];

      //Quiz Creation
      function quizCreator() {
        quizArray.sort(() => Math.random() - 0.5);
        for (let i of quizArray) {
          i.options.sort(() => Math.random() - 0.5);
          let div = document.createElement("div");
          div.classList.add("container-mid", "d-none");
          //question number
          countOfQuestion.innerHTML =
            1 + " of " + quizArray.length + " Question";
          //question
          let question_DIV = document.createElement("p");
          question_DIV.classList.add("question");
          question_DIV.innerHTML = i.question;
          div.appendChild(question_DIV);
          //options
          div.innerHTML += `
    <button class="option-div" onclick="checker(this)">${i.options[0]}</button>
     <button class="option-div" onclick="checker(this)">${i.options[1]}</button>
      <button class="option-div" onclick="checker(this)">${i.options[2]}</button>
       <button class="option-div" onclick="checker(this)">${i.options[3]}</button>
    `;
          quizContainer.appendChild(div);
        }
      }

      //Restart Quiz
      restart.addEventListener("click", () => {
        initial();
        displayContainer.classList.remove("d-none");
        scoreContainer.classList.add("d-none");
      });

      //Next Button
      nextBtn.addEventListener(
        "click",
        (displayNext = () => {
          questionCount += 1;
          if (questionCount == quizArray.length) {
            displayContainer.classList.add("d-none");
            scoreContainer.classList.remove("d-none");
            //user score
            userScore.innerHTML =
              "Your score is " + scoreCount + " out of " + questionCount;
          } else {
            //display questionCount
            countOfQuestion.innerHTML =
              questionCount + 1 + " of " + quizArray.length + " Question";
            //display quiz
            quizDisplay(questionCount);
            count = 11;
            clearInterval(countdown);
            timerDisplay();
          }
        })
      );

      //Timer
      const timerDisplay = () => {
        countdown = setInterval(() => {
          count--;
          timeLeft.innerHTML = `${count}s`;
          if (count == 0) {
            clearInterval(countdown);
            displayNext();
          }
        }, 1000);
      };

      //Display quiz
      const quizDisplay = (questionCount) => {
        let quizCards = document.querySelectorAll(".container-mid");
        //d-none other cards
        quizCards.forEach((card) => {
          card.classList.add("d-none");
        });
        //display current question card
        quizCards[questionCount].classList.remove("d-none");
      };

      function startQuiz() {
        startButton.classList.add("d-none");
        displayContainer.classList.remove("d-none");
        initial();
      }

      function checker(userOption) {
        let userSolution = userOption.innerText;
        let question =
          document.getElementsByClassName("container-mid")[questionCount];
        let options = question.querySelectorAll(".option-div");

        //if user clicked answer == correct option stored in object
        if (userSolution === quizArray[questionCount].correct) {
          userOption.classList.add("correct");
          scoreCount++;
        } else {
          userOption.classList.add("incorrect");
          //For marking the correct option
          options.forEach((element) => {
            if (element.innerText == quizArray[questionCount].correct) {
              element.classList.add("correct");
            }
          });
        }
        clearInterval(countdown);
        //disable all options
        options.forEach((element) => {
          element.disabled = true;
        });
      }

      //initial setup
      function initial() {
        quizContainer.innerHTML = "";
        questionCount = 0;
        scoreCount = 0;
        count = 11;
        clearInterval(countdown);
        timerDisplay();
        quizCreator();
        quizDisplay(questionCount);
      }
    </script>
  </body>
</html>
